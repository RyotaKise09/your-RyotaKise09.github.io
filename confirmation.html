<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSVP Confirmation</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="confirm-box">
        <h1>Thank You for Your RSVP!</h1>
        <p class="details">
            Your response has been recorded.  
            Below are the guests you confirmed:
        </p>
        <div id="guestListConfirmed"></div>
        <button class="home-btn" onclick="goHome()">BACK TO INVITATION</button>
    </div>

    <script>
        // Get all accepted guests from URL
        const params = new URLSearchParams(window.location.search);
        const guestsParam = params.get("guests");
        console.log("Raw guests param:", guestsParam);  // Debug log

        let guests = [];
        if (guestsParam) {
            try {
                // Decode and parse the JSON array
                guests = JSON.parse(decodeURIComponent(guestsParam));
                console.log("Parsed guests:", guests);  // Debug log
            } catch (e) {
                console.error("Parse error:", e);
                guests = [];
            }
        }

        const container = document.getElementById("guestListConfirmed");

        if (guests.length === 0) {
            container.innerHTML = "<p>No guests were accepted.</p>";
        } else {
            container.innerHTML = `<p><strong>${guests.length} guest(s) accepted:</strong></p>`;
            guests.forEach(name => {
                const div = document.createElement("p");
                div.className = "confirmed-name";
                div.textContent = "âœ” " + name;
                container.appendChild(div);
            });
        }

        function goHome() {
            console.log("Button clicked, attempting redirect");  // Debug
            const target = "index.html";  // Change to your main page file (e.g., "index.html")
            try {
                window.location.href = target;
            } catch (e) {
                console.error("Redirect error:", e);
                alert("Redirect failed. Go to " + target + " manually.");
            }
        }
    </script>
</body>
</html>
